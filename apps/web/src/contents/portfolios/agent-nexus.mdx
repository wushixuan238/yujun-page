---
title: "万象智联：智能体枢纽"
category: Scene technology
startDate: 2024-12-09
endDate: 2024-12-09
publishedAt: 2025-04-08
summary: "Final Project of CE2012 - Assembly Language and System Programming"
tags:
  - Assembly
  - Game
  - Ascii Art
  - Tank
  - Bogy
banner: /images/banner/projects/hua-tank.webp
alt: "Hua Tank V.S. Bogy | Final Project of CE2012 - Assembly Language and System Programming"
---

在之前的文章里，我们畅想了万象智联(Agent Nexus)这个AI能力协同中枢的宏伟蓝图。我们知道它能通过数据库配置，动态地编排出千变万化的智能应用。

但是，这一切魔法的背后，其运行的逻辑究竟是怎样的？

> 前端时间在红衫 AI Ascent 上听到一个观点：“未来我们将管理自己的 agent 集群，一人公司成为可能，生产力由集群的数量和质量决定。”

## 基石——可插拔的“大脑” (模型抽象层)

让我们从图的顶部看起。
OllamaApi → OllamaAIChatModel
OpenAIApi → OpenAIChatModel

这是整个设计的第一个高明之处，我管它叫 “通用充电器”原则。

现在市面上的大模型，就像各种品牌的手机，有苹果（OpenAI）、有华为（国产模型），还有各种开源的安卓机（Ollama部署的本地模型）。
它们的“充电口”（API）各不相同。

一个笨办法是，给每个手机配一个专用充电器。但“万象智联”不这么干，它做了一个统一的“充电板”（...AIChatModel接口）。
不管你是什么手机，只要能适配这个充电板，就能接进我们的系统里来。

这是整个架构的基石——模型无关性。
在一个模型技术日新月异的时代，一个成熟的AI架构绝不能被任何单一模型“绑架”。“万象智联”的设计完美地体现了这一点。
它通过一个统一的...AIChatModel接口，将不同模型提供商（如OpenAI、本地Ollama）的API细节完全屏蔽。

这样做的好处显而易见：
想换就换：今天觉得GPT-4贵，想换个便宜的国产模型？行，拔下来，换一个插上就行。想在内网跑个私密任务，用自己的本地模型？也行，插上就行。
不怕淘汰：明天出了个更牛的GPT-5，或者某个开源模型火了，我们只需要给它做个“转接头”，就能立刻用上，整个系统其他地方动都不用动。

这就是经典的“面向接口编程”。说白了，就是把变化的东西（各种模型）和不变的东西（我们的系统）隔离开，让系统永远灵活。


## LLM ChatClient

现在，看图中央那个绿色的：LLM (Large Language Model) ChatClient。
先别把它想成什么复杂的“智能体”或“网络节点”。你就把它想象成一块最基础的、但潜力无限的乐高积木。
它本身只是个“半成品”。它能不能变成轮子、窗户，或者飞机的翅膀，完全取决于我们给它“刻上”什么样的功能。而这些功能，就是下面那四个红色的“加工站”。

## 四大“加工站”

这四个红色模块（Options, Planning, Advisors, Tools）是整个系统的精髓。它们就像四个独立的“加工车间”，一步步把一块普通的积木，打造成我们想要的“超级积木”。
加工站一：Options - 基础设定车间
这里是做最基础的“出厂设置”。
model: 告诉这块积木，它的“材料”来自哪里，是GPT-4还是其他模型。
toolCallbacks: 在积木上预留一些“卡扣”，告诉它如果以后需要安装工具，应该怎么连接。
这就像决定一块乐高积 F木是用ABS塑料还是用透明塑料做，以及它的尺寸和卡扣标准。
加工站二：Planning - 灵魂注入车间
这里是给积木**“写说明书”**，告诉它“你是谁，你要干什么”。
defaultSystem (系统提示词): 这就是刻在积木上的“灵魂”。比如我们给它刻上：“你是一块轮胎积木，你的任务就是滚动。”或者“你是一个专业的财务分析师，你必须严谨、客观，用数据说话。”
没有这一步，它只是一块通用积木。有了这一步，它就有了自己的身份和使命。
加工站三：Advisors - 超能力装备车间
如果说“说明书”给了它使命，那“顾问团”就是给它配备了一身**“超级装备”**。
InMemoryChatMemory (对话记忆): 给积木装上一个**“小本本”**，让它能记住刚刚发生了什么，而不是聊完就忘。
RAG (知识库): 给积木配上一副**“X光眼镜”**，让它能“看穿”我们自己的私有文档库，从中找答案。
Log (日志): 给积木安上一个**“黑匣子”**，记录下它的一举一动，方便我们以后检查问题出在哪。
这些装备都是即插即用的，需要哪个就给它装哪个。
加工站四：Tools - 万能工具箱车间
这里是给积木装上真正的**“手和脚”**，让它能干活。
MCP (工具协议): 这就像是给积木装上了一个**“万能机械臂”**。通过这个机械臂，它可以去操作真实的工具，比如上网搜索、读写文件、发一封邮件，甚至去操作公司的CRM系统。
好了，经过这四个车间的加工，一块普通的积木，就变成了一个身怀绝技、使命明确的“超级智能积木”。


## 点石成金

现在到了最酷的部分。我们造了一堆不同功能的“超级积木”，然后呢？
看图的右边：“串联多个Client客户端”。这就是把零散的积木，搭成一个完整的“机器人”或“生产线”的过程。
一个积木的“产出物”（OUT），可以无缝地成为下一个积木的“原材料”（IN）。这就形成了一条**“AI自动化流水线”**。
让我们用那个写文章的例子，看看这条流水线是怎么工作的：
第一站：信息研究员积木
它的任务：上网！用它的“万能机械臂”（联网工具）把网上关于“量子计算”的资料全扒下来，整理成一堆笔记。然后把这堆笔记传给下一站。
第二站：爆款文章写作积木
它的任务：创作！它拿到上一站的笔记，戴上它的“X光眼镜”（RAG知识库）参考了一下我们内部的“爆款文写作指南”，然后大笔一挥，写出了一篇通俗易懂的科普文章。然后把文章传给下一站。
第三站：全自动发布员积木
它的任务：发布！它接过文章，用它的“机械臂”分别登录CSDN和微信后台，复制、粘贴、点击发布，一气呵成。
看，一个复杂的任务，被拆解成了三个简单的、自动化的步骤。我们没写一行复杂的业务代码，只是把三个功能不同的“积木”按顺序“搭”在了一起。这就是“万象智联”的强大之处：它关心的不是“如何做”，而是“谁来做”，以及“按什么顺序做”。



你不是码农，你是AI建筑师

这套架构，完美地解释了为什么它能用数据库来配置。数据库里的每一行数据，其实就是在描述“我要造一块什么样的积木”，或者“我要怎么搭建一条流水线”。
所以，有了这样的系统，我们的角色也变了。我们不再是埋头写具体业务逻辑的“码农”，而是思考全局、设计流程、搭建体系的“AI建筑师”。这，才是未来AI时代，我们工程师真正的价值所在。